# CSA GUI í™”ë©´ ì„¤ê³„ì„œ - ê·¸ë˜í”„ ì‹œê°í™”

**í˜ì´ì§€**: Graph Viewer (Graph)
**ê²½ë¡œ**: /graph/:projectId
**ì‚¬ìš©ì**: ê°œë°œì (ì£¼ë¡œ)

---

## í˜ì´ì§€ ê°œìš”

Neo4j ê·¸ë˜í”„ ë°ì´í„°ë¥¼ ì¸í„°ë™í‹°ë¸Œ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•©ë‹ˆë‹¤.

---

## ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Graph Viewer  [Project: car-center-dev]         [â—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ”§ Toolbar   â”‚                                  â”‚  â”‚
â”‚ â”‚              â”‚         Neo4j Graph Viewer       â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       (Cytoscape.js)            â”‚  â”‚
â”‚ â”‚ â”‚ğŸ” Search â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚       â—â”€â”€â”€â”€â”€â—                   â”‚  â”‚
â”‚ â”‚ â”‚ Classes  â”‚ â”‚      â•±       â•²                  â”‚  â”‚
â”‚ â”‚ â”‚ Methods  â”‚ â”‚    â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—                â”‚  â”‚
â”‚ â”‚ â”‚ Beans    â”‚ â”‚     â”‚         â”‚                 â”‚  â”‚
â”‚ â”‚ â”‚ Endpointsâ”‚ â”‚    â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—                â”‚  â”‚
â”‚ â”‚ â”‚ Tables   â”‚ â”‚      â•²       â•±                  â”‚  â”‚
â”‚ â”‚ â”‚          â”‚ â”‚       â—â”€â”€â”€â”€â”€â—                   â”‚  â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ¯ Filtersâ”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â˜‘ Class   â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â˜‘ Method  â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â˜‘ Bean    â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â˜‘ SQL     â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â˜‘ Table   â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ“Š Legend â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â— Class  â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â— Bean   â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â— Endpointâ”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â— SQL    â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚ â— Table  â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â”‚          â”‚ â”‚                                  â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                  â”‚  â”‚
â”‚ â”‚              â”‚                                  â”‚  â”‚
â”‚ â”‚ [Export]     â”‚                                  â”‚  â”‚
â”‚ â”‚ [Layout â–¼]   â”‚                                  â”‚  â”‚
â”‚ â”‚              â”‚                                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Node Details                            [â–¼]      â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ Name: UserController                            â”‚  â”‚
â”‚ â”‚ Type: Class                                      â”‚  â”‚
â”‚ â”‚ Package: com.example.user.controller            â”‚  â”‚
â”‚ â”‚ Complexity: High (89)                           â”‚  â”‚
â”‚ â”‚                                                  â”‚  â”‚
â”‚ â”‚ Methods: 12                                     â”‚  â”‚
â”‚ â”‚ Incoming: 5 calls                               â”‚  â”‚
â”‚ â”‚ Outgoing: 23 calls                              â”‚  â”‚
â”‚ â”‚                                                  â”‚  â”‚
â”‚ â”‚ [View Details] [Go to Class Spec]               â”‚  â”‚
â”‚ â”‚                                                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì£¼ìš” ì»´í¬ë„ŒíŠ¸

### Toolbar (ì¢Œì¸¡)

```html
<Toolbar>
  <!-- ê²€ìƒ‰ -->
  <SearchBox
    placeholder="Search nodes..."
    @search="handleSearch"
    clearable
  />

  <!-- í•„í„° -->
  <FilterSection title="Node Types">
    <Checkbox v-model="filters.class">Classes</Checkbox>
    <Checkbox v-model="filters.method">Methods</Checkbox>
    <Checkbox v-model="filters.bean">Beans</Checkbox>
    <Checkbox v-model="filters.sql">SQL Statements</Checkbox>
    <Checkbox v-model="filters.table">Tables</Checkbox>
  </FilterSection>

  <!-- ë²”ë¡€ -->
  <Legend>
    <LegendItem color="#1890ff" label="Class" />
    <LegendItem color="#52c41a" label="Bean" />
    <LegendItem color="#fa8c16" label="Endpoint" />
    <LegendItem color="#722ed1" label="SQL" />
    <LegendItem color="#eb2f96" label="Table" />
  </Legend>

  <!-- ë™ì‘ -->
  <ActionGroup>
    <Button @click="layoutFit">Fit View</Button>
    <Dropdown title="Layout">
      <MenuItem @click="setLayout('cose')">Cose</MenuItem>
      <MenuItem @click="setLayout('concentric')">Concentric</MenuItem>
      <MenuItem @click="setLayout('grid')">Grid</MenuItem>
    </Dropdown>
    <Button @click="exportGraph">Export</Button>
  </ActionGroup>
</Toolbar>
```

### Graph Canvas

Cytoscape.js ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ ê·¸ë˜í”„:

```javascript
import cytoscape from 'cytoscape'

const cy = cytoscape({
  container: graphContainer.value,
  style: [
    {
      selector: 'node',
      style: {
        'background-color': '#1890ff',
        'label': 'data(label)',
        'width': '30px',
        'height': '30px',
        'font-size': '12px',
        'text-valign': 'center',
      }
    },
    {
      selector: 'node.class',
      style: { 'background-color': '#1890ff' }
    },
    {
      selector: 'node.bean',
      style: { 'background-color': '#52c41a' }
    },
    {
      selector: 'edge',
      style: {
        'line-color': '#999',
        'width': '1px',
        'target-arrow-color': '#999',
        'target-arrow-shape': 'triangle',
      }
    }
  ],
  layout: {
    name: 'cose',
    directed: true,
    roots: '#a',
    padding: 10,
  }
})

// ì´ë²¤íŠ¸
cy.on('tap', 'node', (event) => {
  const node = event.target
  showNodeDetails(node)
})

cy.on('mouseover', 'node', (event) => {
  const node = event.target
  node.addClass('hover')
})
```

### Node Details íŒ¨ë„

```html
<NodeDetailsPanel
  v-model:visible="detailsVisible"
  :node="selectedNode"
>
  <Tabs>
    <!-- ê¸°ë³¸ ì •ë³´ -->
    <TabPane label="Details">
      <DescriptionList>
        <DescriptionItem label="Name">
          {{ selectedNode.name }}
        </DescriptionItem>
        <DescriptionItem label="Type">
          {{ selectedNode.type }}
        </DescriptionItem>
        <DescriptionItem label="Package">
          {{ selectedNode.package }}
        </DescriptionItem>
        <DescriptionItem label="Complexity">
          <Tag :color="getComplexityColor(selectedNode.complexity)">
            {{ selectedNode.complexity }}
          </Tag>
        </DescriptionItem>
      </DescriptionList>
    </TabPane>

    <!-- ê´€ê³„ -->
    <TabPane label="Relations">
      <h4>Incoming ({{ incomingCount }})</h4>
      <List :dataSource="incoming">
        <template #renderItem="{ item }">
          <ListItem @click="navigateTo(item.id)">
            {{ item.name }}
          </ListItem>
        </template>
      </List>

      <h4>Outgoing ({{ outgoingCount }})</h4>
      <List :dataSource="outgoing">
        <template #renderItem="{ item }">
          <ListItem @click="navigateTo(item.id)">
            {{ item.name }}
          </ListItem>
        </template>
      </List>
    </TabPane>

    <!-- ë©”íƒ€ë°ì´í„° -->
    <TabPane label="Metadata">
      <JSON :data="selectedNode.metadata" />
    </TabPane>
  </Tabs>

  <div class="actions">
    <Button type="primary" @click="viewDetails">
      View Full Details
    </Button>
  </div>
</NodeDetailsPanel>
```

---

## ì¸í„°ë™ì…˜

### ë§ˆìš°ìŠ¤ ì¸í„°ë™ì…˜

| ë™ì‘ | íš¨ê³¼ |
|------|------|
| **ë§ˆìš°ìŠ¤ ì˜¤ë²„** | ë…¸ë“œ ê°•ì¡°, ê´€ë ¨ ì—£ì§€ í•˜ì´ë¼ì´íŠ¸ |
| **í´ë¦­** | ë…¸ë“œ ìƒì„¸ ì •ë³´ í‘œì‹œ |
| **ë”ë¸”í´ë¦­** | í•´ë‹¹ ë…¸ë“œ ì¤‘ì‹¬ìœ¼ë¡œ í™•ëŒ€ |
| **ë“œë˜ê·¸** | ê·¸ë˜í”„ íŒ¬ ë˜ëŠ” ë…¸ë“œ ì´ë™ |
| **ë§ˆìš°ìŠ¤íœ ** | í™•ëŒ€/ì¶•ì†Œ |
| **ìš°í´ë¦­** | ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ |

### ê²€ìƒ‰ ë° í•„í„°

```javascript
const handleSearch = (query) => {
  const results = cy.elements().filter(el => {
    return el.data('label').includes(query)
  })

  cy.elements().removeClass('highlight')
  results.addClass('highlight')
  cy.fit(results, 50)
}

const applyFilters = () => {
  const toHide = cy.elements().filter(el => {
    const type = el.data('type')
    return !filters.value[type]
  })
  toHide.hide()
}
```

---

## ë°ì´í„° êµ¬ì¡°

```typescript
interface Node {
  id: string
  label: string
  type: 'class' | 'method' | 'bean' | 'endpoint' | 'sql' | 'table'
  metadata: {
    package?: string
    complexity?: number
    incoming?: number
    outgoing?: number
    file?: string
    [key: string]: any
  }
}

interface Edge {
  id: string
  source: string
  target: string
  type: 'calls' | 'uses_table' | 'maps_to' | 'injects'
  weight?: number
}

interface GraphData {
  nodes: Node[]
  edges: Edge[]
}
```

---

## Vue ì»´í¬ë„ŒíŠ¸

```vue
<template>
  <div class="graph-viewer">
    <div class="toolbar">
      <SearchBox @search="handleSearch" />
      <FilterPanel v-model="filters" />
    </div>

    <div class="main">
      <div ref="graphContainer" class="graph-canvas"></div>
      <NodeDetailsPanel
        v-model:visible="detailsVisible"
        :node="selectedNode"
      />
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'
import cytoscape from 'cytoscape'

const route = useRoute()
const projectId = route.params.projectId

const graphContainer = ref(null)
const cy = ref(null)
const filters = ref({
  class: true,
  method: true,
  bean: true,
  sql: true,
  table: true,
})

const detailsVisible = ref(false)
const selectedNode = ref(null)

onMounted(async () => {
  // Neo4jì—ì„œ ê·¸ë˜í”„ ë°ì´í„° ì¡°íšŒ
  const response = await fetch(
    `/api/results/${projectId}/graph`
  )
  const graphData = await response.json()

  // Cytoscape ì´ˆê¸°í™”
  cy.value = cytoscape({
    container: graphContainer.value,
    elements: [
      ...graphData.nodes.map(n => ({ data: n })),
      ...graphData.edges.map(e => ({ data: e }))
    ],
    style: getGraphStyle(),
    layout: { name: 'cose' }
  })

  // ì´ë²¤íŠ¸ ë°”ì¸ë”©
  cy.value.on('tap', 'node', (event) => {
    selectedNode.value = event.target.data()
    detailsVisible.value = true
  })
})

const handleSearch = (query) => {
  const results = cy.value.elements().filter(el =>
    el.data('label')?.includes(query)
  )
  cy.value.fit(results, 50)
}

const getGraphStyle = () => {
  return [/* CSS style array */]
}
</script>

<style scoped>
.graph-viewer {
  display: flex;
  height: 100%;
}

.toolbar {
  width: 250px;
  padding: 16px;
  overflow-y: auto;
  border-right: 1px solid #f0f0f0;
}

.graph-canvas {
  flex: 1;
}
</style>
```

---

## ë‹¤ìŒ ë¬¸ì„œ

- `05-diagram-viewer.md`: ë‹¤ì´ì–´ê·¸ë¨ ë·°ì–´ í™”ë©´ ì„¤ê³„
