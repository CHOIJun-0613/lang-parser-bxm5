# CSA GUI í™”ë©´ ì„¤ê³„ì„œ - ë¶„ì„ ëª¨ë‹ˆí„°ë§

**í˜ì´ì§€**: Analysis (Analyze)
**ê²½ë¡œ**: /analyze
**ì‚¬ìš©ì**: ê°œë°œì (ì£¼ë¡œ)

---

## í˜ì´ì§€ ê°œìš”

ë¶„ì„ ì‹¤í–‰ ë° ì§„í–‰ ìƒí™©ì„ ëª¨ë‹ˆí„°ë§í•˜ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤. 3ë‹¨ê³„ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:
1. í”„ë¡œì íŠ¸ ì„ íƒ/ìƒì„±
2. ë¶„ì„ ì˜µì…˜ ì„¤ì •
3. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ë° ê²°ê³¼ í™•ì¸

---

## ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analyze                                  ğŸ”„  â¸ï¸  âŒ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ Step 1: Select Project                             â”‚
â”‚ [car-center-dev] â–¼  [+ New Project]                â”‚
â”‚                                                      â”‚
â”‚ Step 2: Configure Analysis                         â”‚
â”‚ â˜‘ï¸ Analyze Java Sources                             â”‚
â”‚ â˜‘ï¸ Analyze Database Schema                          â”‚
â”‚ â˜‘ï¸ Clean Previous Data                              â”‚
â”‚ â˜ Use AI Enrichment                                 â”‚
â”‚ â˜ Save Streaming Mode                              â”‚
â”‚                                                      â”‚
â”‚ Advanced Options â–¼                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Parallel Workers: [8]                          â”‚ â”‚
â”‚ â”‚ Batch Size: [50]                               â”‚ â”‚
â”‚ â”‚ File Timeout: [60] sec                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                      â”‚
â”‚ [â† Back]  [Start Analysis]                         â”‚
â”‚                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ ANALYSIS IN PROGRESS (34:05)                       â”‚
â”‚                                                      â”‚
â”‚ Overall Progress:                                   â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%  (4000/6686 files)        â”‚
â”‚                                                      â”‚
â”‚ Current File: UserController.java (156 KB)         â”‚
â”‚ File Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60%                      â”‚
â”‚                                                      â”‚
â”‚ Statistics:                                         â”‚
â”‚ â€¢ Parse Speed: 2.0 files/sec                       â”‚
â”‚ â€¢ ETA: 22 minutes                                  â”‚
â”‚ â€¢ Memory: 1321 MB                                  â”‚
â”‚ â€¢ Errors: 0                                        â”‚
â”‚                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ğŸ“‹ Log Output                          [Ã—]   â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚                                              â”‚  â”‚
â”‚ â”‚ [12:31] âœ“ Package ë°°ì¹˜ ìƒì„± ì™„ë£Œ (0.5ì´ˆ)     â”‚  â”‚
â”‚ â”‚ [12:34] ğŸ”„ íŒŒì‹± ì‹œì‘...                      â”‚  â”‚
â”‚ â”‚ [12:35] âœ“ ë°°ì¹˜ ì €ì¥ ì™„ë£Œ (50ê°œ í´ë˜ìŠ¤)       â”‚  â”‚
â”‚ â”‚ [12:36] ğŸ”„ íŒŒì‹± ì§„í–‰ì¤‘ [100/6686] (1%)      â”‚  â”‚
â”‚ â”‚ [12:41] ğŸ”„ ë°°ì¹˜ ì €ì¥ ì¤‘ (50ê°œ í´ë˜ìŠ¤)        â”‚  â”‚
â”‚ â”‚ [12:42] âœ“ ë°°ì¹˜ ì €ì¥ ì™„ë£Œ (1.2ì´ˆ)            â”‚  â”‚
â”‚ â”‚ ...                                         â”‚  â”‚
â”‚ â”‚ [13:25] ğŸ”„ íŒŒì‹± ì§„í–‰ì¤‘ [4000/6686] (60%)    â”‚  â”‚
â”‚ â”‚                                              â”‚  â”‚
â”‚ â”‚ [Auto-scroll] [Copy All] [Clear] [Export]   â”‚  â”‚
â”‚ â”‚                                              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚ [Cancel Analysis]  [Open Results]                  â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì„¹ì…˜ ìƒì„¸ ì„¤ê³„

### Step 1: í”„ë¡œì íŠ¸ ì„ íƒ

```html
<ProjectSelector>
  <Label>í”„ë¡œì íŠ¸ ì„ íƒ</Label>

  <Select
    v-model="selectedProject"
    placeholder="í”„ë¡œì íŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”"
    allowClear
  >
    <Option value="car-center-dev">car-center-devlab</Option>
    <Option value="payment-svc">payment-service</Option>
    <Option value="user-svc">user-service</Option>
  </Select>

  <Button type="dashed" icon="plus" @click="showCreateModal">
    New Project
  </Button>

  <ProjectInfo v-if="selectedProject">
    <p>Path: {{ projectPath }}</p>
    <p>Last Analyzed: {{ lastAnalyzedDate }}</p>
  </ProjectInfo>
</ProjectSelector>
```

### Step 2: ë¶„ì„ ì˜µì…˜

```html
<AnalysisOptions>
  <Checkbox v-model="options.analyzeJava">
    Analyze Java Sources
  </Checkbox>

  <Checkbox v-model="options.analyzeDb">
    Analyze Database Schema
  </Checkbox>

  <Checkbox v-model="options.cleanPrevious" default>
    Clean Previous Data (ê¶Œì¥)
  </Checkbox>

  <Checkbox v-model="options.useAi">
    Use AI Enrichment (ëŠë¦¼, ~2ë°° ì‹œê°„)
  </Checkbox>

  <Checkbox v-model="options.useStreaming">
    Use Streaming Mode (ëŒ€ê·œëª¨ í”„ë¡œì íŠ¸)
  </Checkbox>

  <Collapse title="Advanced Options">
    <Row :gutter="16">
      <Col :span="12">
        <InputNumber
          v-model="options.workers"
          label="Parallel Workers"
          min="1"
          max="16"
        />
      </Col>
      <Col :span="12">
        <InputNumber
          v-model="options.batchSize"
          label="Batch Size"
          min="20"
          max="200"
        />
      </Col>
    </Row>

    <Row :gutter="16">
      <Col :span="12">
        <InputNumber
          v-model="options.timeout"
          label="File Timeout (sec)"
          min="30"
          max="600"
        />
      </Col>
      <Col :span="12">
        <InputNumber
          v-model="options.complexity"
          label="Complexity Threshold"
          min="10000"
        />
      </Col>
    </Row>
  </Collapse>
</AnalysisOptions>
```

### Step 3: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

#### ì§„í–‰ë¥  í‘œì‹œ

```html
<ProgressSection>
  <!-- ì „ì²´ ì§„í–‰ë¥  -->
  <div class="progress-container">
    <h3>Overall Progress</h3>
    <Progress
      type="circle"
      :percent="overallPercent"
      :width="120"
      :strokeColor="getProgressColor(overallPercent)"
    />
    <p class="progress-text">{{ currentFiles }}/{{ totalFiles }} files</p>
    <p class="progress-subtext">{{ elapsedTime }} elapsed</p>
  </div>

  <!-- í˜„ì¬ íŒŒì¼ ì§„í–‰ë¥  -->
  <div class="current-file">
    <p class="file-name">ğŸ“„ {{ currentFileName }}</p>
    <p class="file-size">{{ currentFileSize }} KB</p>
    <Progress :percent="filePercent" />
  </div>

  <!-- í†µê³„ -->
  <Row :gutter="16" class="statistics">
    <Statistic
      title="Parse Speed"
      :value="`${filesPerSec} files/sec`"
    />
    <Statistic
      title="ETA"
      :value="`${etaMinutes} min`"
    />
    <Statistic
      title="Memory"
      :value="`${memoryMb} MB`"
      :valueStyle="getMemoryColor(memoryMb)"
    />
    <Statistic
      title="Errors"
      :value="errorCount"
      :valueStyle="errorCount > 0 ? { color: '#f5222d' } : {}"
    />
  </Row>
</ProgressSection>
```

#### ë¡œê·¸ ì¶œë ¥

```html
<LogViewer
  v-model:logs="logs"
  :height="300"
  :autoScroll="autoScroll"
>
  <template #header>
    <Checkbox v-model="autoScroll">Auto-scroll</Checkbox>
    <Button size="small" @click="copyLogs">Copy All</Button>
    <Button size="small" @click="clearLogs">Clear</Button>
    <Button size="small" @click="exportLogs">Export</Button>
  </template>

  <template #log="{ log }">
    <div :class="`log-${log.level}`">
      <span class="log-time">{{ log.timestamp }}</span>
      <span class="log-level">{{ log.level }}</span>
      <span class="log-message">{{ log.message }}</span>
    </div>
  </template>
</LogViewer>
```

---

## WebSocket ë©”ì‹œì§€ ì²˜ë¦¬

### ë©”ì‹œì§€ íƒ€ì…

```typescript
interface ProgressMessage {
  type: 'progress'
  data: {
    percentage: number
    current: number
    total: number
    currentFile: string
    fileSize: number
    filesPerSec: number
    etaMinutes: number
    memoryMb: number
  }
}

interface LogMessage {
  type: 'log'
  level: 'INFO' | 'WARNING' | 'ERROR' | 'DEBUG'
  timestamp: string
  message: string
}

interface ErrorMessage {
  type: 'error'
  errorCount: number
  timeoutCount: number
  lastError: string
}

interface CompleteMessage {
  type: 'complete'
  data: {
    duration: number
    statistics: {
      classes: number
      methods: number
      beans: number
      endpoints: number
      tables: number
    }
    status: 'success' | 'partial' | 'failed'
  }
}
```

### WebSocket ì—°ê²°

```javascript
// Vue ì»´í¬ë„ŒíŠ¸
const ws = ref(null)

const startAnalysis = () => {
  ws.value = new WebSocket(
    `ws://localhost:8000/ws/analysis/${selectedProject.value}`
  )

  ws.value.onmessage = (event) => {
    const message = JSON.parse(event.data)
    handleMessage(message)
  }

  ws.value.onerror = (error) => {
    console.error('WebSocket error:', error)
    // ì˜¤ë¥˜ ì²˜ë¦¬
  }

  ws.value.onclose = () => {
    console.log('WebSocket closed')
  }
}

const handleMessage = (message) => {
  switch (message.type) {
    case 'progress':
      updateProgress(message.data)
      break
    case 'log':
      addLog(message)
      break
    case 'error':
      updateErrors(message)
      break
    case 'complete':
      analysisComplete(message.data)
      break
  }
}
```

---

## ì»¨íŠ¸ë¡¤ ë²„íŠ¼

### ë¶„ì„ ì¤‘

```html
<Button type="primary" danger @click="cancelAnalysis">
  Cancel Analysis
</Button>

<Button @click="pauseAnalysis" disabled>
  Pause (ì¶”í›„ ì§€ì›)
</Button>

<Tooltip title="ë¶„ì„ ì™„ë£Œ í›„ ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™">
  <Button disabled>
    Open Results (ì™„ë£Œ ì‹œ í™œì„±í™”)
  </Button>
</Tooltip>
```

### ë¶„ì„ ì™„ë£Œ í›„

```html
<Button type="primary" @click="openResults">
  View Results
</Button>

<Button @click="openGraph">
  View Graph
</Button>

<Button @click="downloadReport">
  Download Report
</Button>

<Button @click="startNewAnalysis">
  Analyze Another Project
</Button>
```

---

## ë°ì´í„° êµ¬ì¡°

```typescript
interface AnalysisOptions {
  analyzeJava: boolean
  analyzeDb: boolean
  cleanPrevious: boolean
  useAi: boolean
  useStreaming: boolean

  // Advanced
  workers: number
  batchSize: number
  timeout: number
  complexity: number
}

interface AnalysisState {
  status: 'idle' | 'running' | 'paused' | 'completed' | 'failed'
  overallPercent: number
  currentFiles: number
  totalFiles: number
  currentFile: string
  currentFileSize: number

  filesPerSec: number
  etaMinutes: number
  memoryMb: number
  errorCount: number

  startTime: Date
  elapsedTime: string

  logs: LogEntry[]
}

interface LogEntry {
  timestamp: string
  level: 'INFO' | 'WARNING' | 'ERROR' | 'DEBUG'
  message: string
  icon?: string
}
```

---

## Vue ì»´í¬ë„ŒíŠ¸ ì˜ˆì‹œ

```vue
<template>
  <div class="analysis-page">
    <div v-if="!isRunning" class="setup-section">
      <!-- Step 1, 2, 3 -->
    </div>

    <div v-else class="monitoring-section">
      <ProgressSection
        :statistics="statistics"
        :logs="logs"
      />
      <div class="controls">
        <Button type="primary" danger @click="cancelAnalysis">
          Cancel Analysis
        </Button>
        <Button
          v-if="isCompleted"
          type="primary"
          @click="openResults"
        >
          View Results
        </Button>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onBeforeUnmount, computed } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()
const selectedProject = ref('')
const options = ref({
  analyzeJava: true,
  analyzeDb: true,
  cleanPrevious: true,
  useAi: false,
  useStreaming: false,
  workers: 8,
  batchSize: 50,
  timeout: 60,
  complexity: 50000,
})

const isRunning = ref(false)
const isCompleted = ref(false)
const logs = ref([])
const statistics = ref(null)
const ws = ref(null)

const startAnalysis = () => {
  isRunning.value = true

  // WebSocket ì—°ê²°
  ws.value = new WebSocket(
    `ws://localhost:8000/ws/analysis/${selectedProject.value}`
  )

  ws.value.onmessage = (event) => {
    const message = JSON.parse(event.data)
    handleMessage(message)
  }
}

const handleMessage = (message) => {
  switch (message.type) {
    case 'progress':
      statistics.value = message.data
      break
    case 'log':
      logs.value.push(message)
      break
    case 'complete':
      isCompleted.value = true
      isRunning.value = false
      break
  }
}

const cancelAnalysis = () => {
  if (ws.value) {
    ws.value.close()
  }
  isRunning.value = false
  // POST /api/analysis/{id}/cancel
}

const openResults = () => {
  router.push({
    name: 'Results',
    params: { projectId: selectedProject.value }
  })
}

onBeforeUnmount(() => {
  if (ws.value) {
    ws.value.close()
  }
})
</script>

<style scoped>
.progress-text {
  text-align: center;
  font-size: 14px;
  margin-top: 8px;
}

.log-entry {
  padding: 4px 0;
  font-family: monospace;
  font-size: 12px;
  line-height: 1.5;
}

.log-INFO { color: #1890ff; }
.log-WARNING { color: #faad14; }
.log-ERROR { color: #f5222d; }
.log-DEBUG { color: #722ed1; }
</style>
```

---

## ë‹¤ìŒ ë¬¸ì„œ

- `04-graph-viewer.md`: ê·¸ë˜í”„ ì‹œê°í™” í™”ë©´ ì„¤ê³„
